{
  "comments": [
    {
      "key": {
        "uuid": "44b7954c_1017845f",
        "filename": "src/main/java/com/google/gwtorm/jdbc/JdbcSchema.java",
        "patchSetId": 4
      },
      "lineNbr": 54,
      "author": {
        "id": 1016473
      },
      "writtenOn": "2014-07-02T09:52:09Z",
      "side": 1,
      "message": "Do not do that!\nDo not make sens.\n\nAny JDBC driver if do not have data to commit, do not throw Exception.\n\nThis logic make sens for rollback() only.",
      "revId": "8832e883d1261f5496f84ebc7284c10cd71930d6",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "c45705b3_e449fa47",
        "filename": "src/main/java/com/google/gwtorm/jdbc/JdbcSchema.java",
        "patchSetId": 4
      },
      "lineNbr": 54,
      "author": {
        "id": 1011123
      },
      "writtenOn": "2014-07-02T10:04:07Z",
      "side": 1,
      "message": "If this is wrong, please change your review to -1 instead of +1.",
      "parentUuid": "44b7954c_1017845f",
      "revId": "8832e883d1261f5496f84ebc7284c10cd71930d6",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "24bc6131_0f17655f",
        "filename": "src/main/java/com/google/gwtorm/jdbc/JdbcSchema.java",
        "patchSetId": 4
      },
      "lineNbr": 54,
      "author": {
        "id": 1011323
      },
      "writtenOn": "2014-07-02T10:10:25Z",
      "side": 1,
      "message": "You are mixing two different use cases. Use case 1:\n\n  beginTransaction()\n  commit()\n\nthis works, because beginTransaction() set autoCommit\u003dfalse and commit is successful even though nothing to commit.\n\nUse case 2:\n\n  open Connection with autoCommit\u003dtrue\n  commit()\n\nEvidently, this doesn\u0027t work on all Jdbc dialects supported by Gerrit. E. g. this doesn\u0027t work on PostgreSQL for the same reason why rollback() doesn\u0027t work. To see the failure, remove this if-guard above and run PostgreSQL unit test:\n\n  testRollbackNoTransaction()\n\nit is failing with:\n\n  Cannot commit when autoCommit is enabled.\n\nor some such.",
      "range": {
        "startLine": 54,
        "startChar": 6,
        "endLine": 54,
        "endChar": 34
      },
      "revId": "8832e883d1261f5496f84ebc7284c10cd71930d6",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "44b7954c_1081443c",
        "filename": "src/main/java/com/google/gwtorm/jdbc/JdbcSchema.java",
        "patchSetId": 4
      },
      "lineNbr": 54,
      "author": {
        "id": 1016473
      },
      "writtenOn": "2014-07-02T11:02:07Z",
      "side": 1,
      "message": "I was wrong.\n\nPG throw:\n\norg.postgresql.util.PSQLException: Cannot commit when autoCommit is enabled.\n\tat org.postgresql.jdbc2.AbstractJdbc2Connection.commit(AbstractJdbc2Connection.java:705)\n\nIn this case code is good.\n\n// Repetitive commit(); calls works only in autocomit code.\ndb.setAutoCommit(false);\ndb.commit();\ndb.commit();\ndb.commit();\ndb.commit();",
      "parentUuid": "44b7954c_1017845f",
      "revId": "8832e883d1261f5496f84ebc7284c10cd71930d6",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2469c174_a7430a26",
        "filename": "src/main/java/com/google/gwtorm/jdbc/JdbcSchema.java",
        "patchSetId": 4
      },
      "lineNbr": 54,
      "author": {
        "id": 1010737
      },
      "writtenOn": "2014-07-02T11:05:03Z",
      "side": 1,
      "message": "+1 I wasn\u0027t aware that beginTransaction() was also setting autoCommit\u003dfalse - I blame unfamiliarity with the code.",
      "parentUuid": "24bc6131_0f17655f",
      "range": {
        "startLine": 54,
        "startChar": 6,
        "endLine": 54,
        "endChar": 34
      },
      "revId": "8832e883d1261f5496f84ebc7284c10cd71930d6",
      "serverId": "173816e5-2b9a-37c3-8a2e-48639d4f1153",
      "unresolved": false
    }
  ]
}